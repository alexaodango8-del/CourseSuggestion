<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Course Assessment - RIASEC</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">

  <h1>Course Assessment</h1>
  <h2>Welcome, <span id="displayUser"></span>!</h2>

  <form id="assessmentForm">

    <!-- Helper function: reuse radio buttons -->
    <script>
      function options(name, category) {
        return `
        <label><input type="radio" name="${name}" value="${category}|2"> Strongly Agree</label>
        <label><input type="radio" name="${name}" value="${category}|1"> Agree</label>
        <label><input type="radio" name="${name}" value="Neutral|0"> Neutral</label>
        <label><input type="radio" name="${name}" value="Other|0"> Disagree</label>
        <label><input type="radio" name="${name}" value="Other|0"> Strongly Disagree</label>
        `;
      }
    </script>

    <!-- R -->
    <h3>R – Realistic</h3>
    <p>1. I enjoy fixing, building, or working with tools.</p><div id="q1"></div>
    <p>2. I enjoy hands-on activities.</p><div id="q2"></div>
    <p>3. I enjoy technical or mechanical tasks.</p><div id="q3"></div>

    <!-- I -->
    <h3>I – Investigative</h3>
    <p>4. I like analyzing how things work.</p><div id="q4"></div>
    <p>5. I rely on logic and facts.</p><div id="q5"></div>
    <p>6. I enjoy science-related activities.</p><div id="q6"></div>
    <p>7. I enjoy solving puzzles.</p><div id="q7"></div>

    <!-- A -->
    <h3>A – Artistic</h3>
    <p>8. I enjoy creating original work.</p><div id="q8"></div>
    <p>9. I think about new ideas.</p><div id="q9"></div>
    <p>10. I enjoy artistic expression.</p><div id="q10"></div>
    <p>11. I enjoy creative projects.</p><div id="q11"></div>

    <!-- S -->
    <h3>S – Social</h3>
    <p>12. I enjoy helping people.</p><div id="q12"></div>
    <p>13. I gain energy from people.</p><div id="q13"></div>
    <p>14. I enjoy guiding others.</p><div id="q14"></div>

    <!-- E -->
    <h3>E – Enterprising</h3>
    <p>15. I like persuading others.</p><div id="q15"></div>
    <p>16. I enjoy leadership roles.</p><div id="q16"></div>
    <p>17. I like public speaking.</p><div id="q17"></div>

    <!-- C -->
    <h3>C – Conventional</h3>
    <p>18. I like organized tasks.</p><div id="q18"></div>
    <p>19. I enjoy planning and organizing.</p><div id="q19"></div>
    <p>20. I like working with data.</p><div id="q20"></div>

    <br>
    <button class="btn" type="submit">Submit Assessment</button>
  </form>

  <a href="index.html" class="btn">Back to Home</a>
</div>

<script>
  const currentUser = localStorage.getItem("currentUser");
  if (!currentUser) location.href = "index.html";
  document.getElementById("displayUser").innerText = currentUser;

  // Render options
  const map = {
    1:"Realistic",2:"Realistic",3:"Realistic",
    4:"Investigative",5:"Investigative",6:"Investigative",7:"Investigative",
    8:"Artistic",9:"Artistic",10:"Artistic",11:"Artistic",
    12:"Social",13:"Social",14:"Social",
    15:"Enterprising",16:"Enterprising",17:"Enterprising",
    18:"Conventional",19:"Conventional",20:"Conventional"
  };

  for (let i=1;i<=20;i++) {
    document.getElementById("q"+i).innerHTML = options("q"+i,map[i]);
  }

  document.getElementById("assessmentForm").addEventListener("submit", e=>{
    e.preventDefault();

    let scores = {
      Realistic:0, Investigative:0, Artistic:0,
      Social:0, Enterprising:0, Conventional:0
    };

    for (let i=1;i<=20;i++){
      let ans=document.querySelector(`input[name="q${i}"]:checked`);
      if(!ans){ alert("Please answer all questions."); return; }
      let [cat,weight]=ans.value.split("|");
      if(scores[cat]!=undefined) scores[cat]+=parseInt(weight);
    }

    let sorted = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
    let top3 = sorted.slice(0,3);

    const explanations = {
      Realistic:"You prefer hands-on, practical, and technical work.",
      Investigative:"You enjoy analysis, research, and problem-solving.",
      Artistic:"You are creative, expressive, and imaginative.",
      Social:"You enjoy helping, teaching, and supporting others.",
      Enterprising:"You like leading, persuading, and influencing.",
      Conventional:"You value organization, structure, and accuracy."
    };

    const courses = {
      Realistic:"Engineering, Architecture, Industrial Technology",
      Investigative:"IT, Data Science, Biology, Mathematics",
      Artistic:"Multimedia Arts, Communication, Fine Arts",
      Social:"Education, Nursing, Psychology, Tourism",
      Enterprising:"Business, Marketing, Entrepreneurship",
      Conventional:"Accountancy, Finance, Office Administration"
    };

    let result = {
      date:new Date().toLocaleString(),
      scores:scores,
      top3: top3.map(t=>({
        type:t[0],
        description:explanations[t[0]],
        courses:courses[t[0]]
      }))
    };

    let history = JSON.parse(localStorage.getItem(currentUser)) || [];
    history.push(result);
    localStorage.setItem(currentUser,JSON.stringify(history));

    window.location.href="result.html";
  });
</script>
</body>
</html>
